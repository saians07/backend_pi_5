services:
  backend_pi_5_blue:
    container_name: backend_pi_5_blue
    networks:
      - unified_network
    restart: unless-stopped
    image: ghcr.io/saians07/backend_pi_5:latest
    ports:
      - 8082:8080
    env_file:
      - ./.env
    environment:
      - PORT=8080
      - APP_ENV=production
    command: ["gunicorn", "-k", "uvicorn.workers.UvicornWorker", "-t", "120", "-w", "4", "-b", "0.0.0.0:8080", "--keep-alive", "75", "--log-level", "info", "main:app"]

networks:
  unified_network:
    external: true